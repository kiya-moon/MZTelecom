<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page import="java.util.*"%>
<%
List<Map<String, Object>> productList = (List<Map<String, Object>>) session.getAttribute("productList");
String productIdParam = request.getParameter("productId");

// productList에서 productId에 해당하는 상품을 찾음
Map<String, Object> item = null;
for (Map<String, Object> product : productList) {
	String productId = String.valueOf(product.get("id"));

	if (productId.equals(productIdParam)) {
		item = product;
		
		request.setAttribute("item", item);
		break;
	}
}
%>

<section class="common">
	<article>
		<div class="productDetail-container">
			<div class="image-content">
	        	<img src="${pageContext.request.contextPath}/resources/images/${item.image}" alt="${item.name}">
	        </div>
            <div class="info-content">
                <h2>${item.name}</h2>
                
	            <p>저장공간</p>
                <div class="info-capacities">
	                <c:forEach items="${item.capacities}" var="capacity">
	                    <p>${capacity}</p>
	                </c:forEach>
                </div>
	            <p>사진은 약 51,200장, 영화는 약 320편 이상을 저장할 수 있어요.</p>
	            
	            <div class="info-plan">
	                <h2>월 ${item.finalPrice}원</h2>
	                <p>휴대폰 1,399,200원</p>
	                <p>통신료 할인가 65,000원</p>
	                <p>정상가 1,399,200원</p>
	            </div>
                
                <div class="order-btn">
	                <button type="button" class="cart">장바구니</button>
	                <button type="button" class="order">온라인 주문</button>
                </div>
            </div>
        </div>
	</article>
</section>
